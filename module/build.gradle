apply plugin: 'java'
apply plugin: 'rirutools.ndk'
apply plugin: 'rirutools.dex'
apply plugin: 'rirutools.magisk'

sourceCompatibility = 1.8
targetCompatibility = 1.8

ndk {
    sourceDir = "src/main/cpp"
}

dex {
    platform = "android-28"
    buildTools = "28.0.3"
    
    exclude "android"
}

magisk {
    output "$buildDir/outputs/riru-ifw-enhance.zip"
    
    zip.map(file("src/main/raw/magisk"), "/")
    zip.map(file("$buildDir/outputs/dex/classes.jar"), "/system/framework/boot-ifw-enhance.jar")
    zip.map(file("$buildDir/outputs/ndk/arm64-v8a/shared") ,"/system/lib64")
    zip.map(file("$buildDir/outputs/ndk/armeabi-v7a/shared") ,"/system/lib")
}

repositories {
    mavenCentral()
}

dependencies {
}
